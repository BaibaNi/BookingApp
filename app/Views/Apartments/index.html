{% extends "layout.html" %}

{% block content %}
<div>
    <p>
        <a href="/">Back</a>
        {% if session.userid is defined %}
            | <a href="/apartments/create">Add apartment for booking</a>
        {% endif %}
    </p>
</div>

<p>AVAILABLE APARTMENTS</p>
    {% for apartment in apartments %}
    <div class="card mb-3" style="margin: 0 auto">
        <div class="row g-0">
            <div class="col-md-4" style="width: 25%">
                <img src="https://imagesvc.meredithcorp.io/v3/mm/image?url=https%3A%2F%2Fstatic.onecms.io%2Fwp-content%2Fuploads%2Fsites%2F24%2F2020%2F06%2F02%2Fbeachside-bungalow-plan-sl-1117_0-2000.jpg&w=400&h=268&c=sc&poi=face&q=60"
                     class="img-fluid rounded-start" alt="house" >
            </div>
            <div class="col-md-8" style="width: 75%">
                <div class="card-body">
                    <h5 class="card-title">
                        <a href="/apartments/{{ apartment.id }}">{{ apartment.title }} ({{ apartment.avgRating }} â˜…)</a>
                    </h5>
                    <div class="card-text">
                        <p class="description">Address: {{ apartment.address }}</p>
                        <p class="description">{{ apartment.description }}</p>
                        <p class="description">Available from: {{ apartment.availableFrom|date('d-m-Y') }}</p>
                        <p class="description">Available until: {{ apartment.availableUntil|date('d-m-Y') }}</p>
                    </div>

                    <div>
                        {% if session.userid == apartment.userId %}
                            <form method="post" action="/apartments/{{ apartment.id }}/delete">
                                <button type="submit" onclick="return confirm('Are you sure you want to delete this apartment?')"
                                        class="btn btn-primary">Delete</button>
                            </form>
                            <a href="/apartments/{{ apartment.id }}/edit">Edit</a> |
                        {% endif %}
                            <a href="/apartments/{{ apartment.id }}">Reserve</a> |
                            <a href="/apartments/{{ apartment.id }}">Give review</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% endfor %}


{% endblock %}